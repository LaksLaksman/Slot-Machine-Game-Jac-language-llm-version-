impl SlotMachine.play {
    if not [root --> (`?machine)] {
        next = root ++> machine();
    } else {
        next = [root --> (`?machine)];
    }
    visit next;
}

impl SlotMachine.spin {
    if credits <= 0 {
        print("ðŸ’¸ No credits left! Game over.");
        disengage;
    }

    credits -= 1;

    let all_symbols = ["ðŸ’", "ðŸ‹", "ðŸ””", "â­", "7ï¸âƒ£"];
    symbols = [
        all_symbols[random.randint(0, len(all_symbols) - 1)],
        all_symbols[random.randint(0, len(all_symbols) - 1)],
        all_symbols[random.randint(0, len(all_symbols) - 1)]
    ];

    print(f"ðŸŽ° You spun: {symbols}");

    if symbols[0] == symbols[1] == symbols[2] {
        result = "ðŸŽ‰ Jackpot! You win!";
        credits += 5;
    } else {
        result = "âŒ No match. Try again!";
    }

    print(result);
    print(f"ðŸŽ® Credits left: {credits}");

    let feedback = spin_feedback(symbols);
    print(f"ðŸ¤– LLM Hint: {feedback}");

    if credits > 0 {
        here ++> machine();
        visit [-->];
    } else {
        print("ðŸ›‘ Game over. No credits remaining.");
        disengage;
    }
}
